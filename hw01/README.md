# 水印批处理工具

一个功能强大的Windows桌面应用程序，用于批量添加水印到图片。

## 功能特性

### 文件处理
- **导入图片**: 支持单张图片拖拽或文件选择器导入，支持批量导入多张图片或整个文件夹
- **格式支持**: 输入格式支持JPEG、PNG、BMP、TIFF（PNG支持透明通道），输出格式可选择JPEG或PNG
- **导出设置**: 可指定输出文件夹，提供多种命名规则（保留原名、添加前缀/后缀），支持JPEG质量调节和图片尺寸调整

### 水印类型
- **文本水印**: 自定义文本内容、字体选择、字号、粗体/斜体、颜色选择、透明度调节、阴影/描边效果
- **图片水印**: 支持PNG透明图片作为水印，可调节缩放比例和透明度

### 水印布局与样式
- **实时预览**: 所有水印调整在主预览窗口实时显示，支持切换不同图片预览
- **位置控制**: 九宫格预设位置一键放置，支持手动拖拽到任意位置
- **旋转功能**: 支持0-360度任意角度旋转
- **独立控制**: 文本和图片水印可分别拖拽定位

### 配置管理
- **模板系统**: 保存当前水印设置为模板，支持加载、管理和删除模板
- **自动保存**: 程序启动时自动加载上次设置，关闭时自动保存当前配置

## 使用方法

### 运行程序
1. 双击 `watermark_tool.exe` 启动程序
2. 或使用命令行：`watermark_tool.exe`

### 基本操作流程
1. **导入图片**: 拖拽图片到左侧列表，或点击"选择图片"按钮
2. **设置水印**: 
   - 在右侧面板设置文本水印内容、字体、颜色等
   - 或选择图片水印文件
   - 调整位置、旋转角度等
3. **预览效果**: 在中央预览窗口查看水印效果
4. **导出图片**: 设置输出目录和命名规则，点击"开始导出"

### 模板管理
1. **保存模板**: 设置好水印参数后，输入模板名称，点击"保存模板"
2. **加载模板**: 从"模板列表"中选择模板，点击"载入"
3. **删除模板**: 选择模板后点击"删除"

## 系统要求

- Windows 10/11 (64位)
- 无需安装Python或其他依赖

## 文件说明

- `watermark_tool.exe`: 主程序可执行文件
- 模板文件保存在: `%USERPROFILE%\.watermark_tool\templates\`
- 上次设置自动保存为: `%USERPROFILE%\.watermark_tool\templates\last.json`

## 技术实现

- **界面框架**: PyQt5
- **图像处理**: Pillow (PIL)
- **打包工具**: PyInstaller
- **支持格式**: JPEG, PNG, BMP, TIFF

## 注意事项

- 建议不要将输出目录设置为原图片所在目录，避免覆盖原图
- 图片水印建议使用PNG格式以支持透明效果
- 程序会自动创建模板存储目录，无需手动创建
