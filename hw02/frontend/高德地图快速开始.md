# 高德地图快速开始指南

## 快速配置（3步）

### 步骤 1: 获取 API Key

1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册/登录账号
3. 进入 [控制台](https://console.amap.com/) → **应用管理** → **我的应用**
4. 创建新应用（类型：Web端(JS API)）
5. 添加 Key（服务平台：Web端(JS API)）
6. 复制生成的 **Key**

### 步骤 2: 配置环境变量

在 `frontend/.env.local` 文件中添加：

```bash
VITE_AMAP_KEY=你的高德地图Key
```

**可选**：如果高德地图要求配置安全密钥，也添加：

```bash
VITE_AMAP_SECURITY_CODE=你的安全密钥
```

### 步骤 3: 重启开发服务器

```bash
# 停止当前服务器（Ctrl+C）
# 然后重新启动
npm run dev
```

## 验证配置

1. 打开浏览器控制台（F12）
2. 应该能看到：`✅ 高德地图 API Key 已配置`
3. 访问行程详情页面（`/trip/:id`）
4. 切换到 **地图视图** 标签
5. 应该能看到地图和标记点

## 使用位置

地图功能已集成到以下位置：

1. **行程详情页面** (`/trip/:id`)
   - 切换到 **地图视图** 标签
   - 显示行程中所有活动的地点
   - 点击标记点查看详情

2. **TripMap 组件**
   - 可以在任何地方使用 `<TripMap trip={trip} />`
   - 自动显示行程地图

## 常见问题

### Q: 地图不显示？
- 检查 API Key 是否正确配置
- 检查浏览器控制台是否有错误
- 确认已重启开发服务器

### Q: 标记点不显示？
- 检查活动数据中是否包含 `location.coordinates`
- 确认坐标格式：`{ lng: number, lat: number }`

### Q: 需要安全密钥吗？
- 高德地图 JS API 2.0 可能需要安全密钥
- 如果看到 "Security JS Code" 错误，需要配置安全密钥
- 在 `.env.local` 中添加 `VITE_AMAP_SECURITY_CODE`

## 详细文档

查看 `docs/高德地图集成指南.md` 获取完整文档。

