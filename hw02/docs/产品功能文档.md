# Web版AI旅行规划师 产品功能文档

## 一、项目概述

### 1.1 项目背景
随着旅游市场的蓬勃发展和AI技术的成熟，传统的旅行规划方式已无法满足现代用户对个性化、便捷化的需求。本项目旨在打造一款基于大语言模型的智能旅行规划Web应用，通过自然语言交互和AI智能分析，为用户提供全方位的旅行规划服务。

### 1.2 产品定位
一款面向普通旅游爱好者的智能旅行规划助手，提供从行程规划、预算管理到实时导航的一站式旅行解决方案。

### 1.3 核心价值
- **智能化**：基于AI大模型理解用户需求，自动生成个性化行程
- **便捷性**：支持语音交互，降低使用门槛
- **全面性**：涵盖行程、预算、导航等全流程服务
- **可靠性**：云端数据同步，多设备无缝切换

---

## 二、功能需求详述

### 2.1 智能行程规划模块

#### 2.1.1 多模态输入
**功能描述**：
- **语音输入**（必须）：用户通过麦克风说出旅行需求
  - 实时语音识别，将语音转换为文字
  - 支持中英文混合识别
  - 提供语音输入提示词示例
  
- **文字输入**（必须）：用户通过文本框输入旅行需求
  - 支持富文本编辑
  - 提供快速填写模板

**输入信息包含**：
- 目的地（必填）
- 出行日期和天数（必填）
- 预算范围（必填）
- 同行人数及类型（如带孩子、情侣、独行等）
- 旅行偏好（美食、文化、自然风光、购物、冒险等）
- 特殊需求（无障碍、素食、宗教等）

**交互示例**：
```
用户语音："我想去日本，5天，预算1万元，喜欢美食和动漫，带孩子"

系统识别并确认：
✓ 目的地：日本
✓ 行程：5天
✓ 预算：10,000元
✓ 人数：2人（1成人+1儿童）
✓ 偏好：美食、动漫文化
```

#### 2.1.2 AI行程生成
**功能描述**：
基于用户输入，调用大语言模型生成详细的旅行计划

**生成内容包括**：

1. **行程概览**
   - 每日主题安排
   - 总体路线图（基于地图API可视化）
   - 行程亮点总结

2. **每日详细计划**
   - 时间轴式行程表（精确到小时）
   - 交通方式及路线
     * 城际交通（飞机、高铁、大巴等）
     * 市内交通（地铁、公交、出租车等）
     * 预计交通时间和费用
   
   - 住宿推荐
     * 3-5个酒店选项（不同价位）
     * 位置、价格、评分、设施信息
     * 地图标注
   
   - 景点安排
     * 景点名称、开放时间、门票价格
     * 推荐游玩时长
     * 特色亮点介绍
     * 地图位置及导航
   
   - 餐厅推荐
     * 早中晚餐推荐（结合用户偏好）
     * 特色菜品、人均消费
     * 营业时间、地图位置

3. **备选方案**
   - 提供雨天/备选景点
   - 不同预算档位的选择

#### 2.1.3 行程编辑与优化
**功能描述**：
- 拖拽式调整行程顺序
- 添加/删除/替换景点
- 调整时间安排
- AI重新优化（根据修改后的行程重新计算路线和时间）
- 保存多个版本方案对比

#### 2.1.4 地图可视化
**功能描述**：
- 在地图上标注所有景点、酒店、餐厅位置
- 显示每日行程路线
- 支持2D/3D地图切换
- 点击标记点显示详细信息
- 计算景点间实际距离和时间

---

### 2.2 费用预算与管理模块

#### 2.2.1 AI预算分析
**功能描述**：
基于行程计划，AI自动生成详细预算清单

**预算分类**：
- **交通费用**
  - 往返大交通（机票/火车票）
  - 当地交通（地铁/公交/打车）
  
- **住宿费用**
  - 每晚价格×天数
  - 不同星级选项对比

- **餐饮费用**
  - 早中晚餐预算
  - 特色美食推荐及价格

- **门票费用**
  - 各景点门票明细
  - 联票/优惠信息

- **购物娱乐**
  - 预留购物预算
  - 其他娱乐活动费用

- **应急备用金**
  - 建议预留10-15%

**预算展示**：
- 饼图展示各类费用占比
- 柱状图对比预算与实际支出
- 总预算与剩余预算实时显示

#### 2.2.2 费用记录功能
**功能描述**：
旅行中实时记录开销

**记录方式**：
1. **语音记录**（推荐）
   - "刚花了150元吃午饭"
   - 自动识别金额和类别
   
2. **手动输入**
   - 金额、类别、备注
   - 支持拍照上传小票

3. **自动分类**
   - AI自动将支出归入对应类别
   - 智能识别异常支出并提醒

**统计分析**：
- 实时更新已花费金额
- 与预算对比，超支预警
- 生成消费报告（按天/按类别）
- 导出Excel/PDF财务报告

---

### 2.3 用户管理与数据存储模块

#### 2.3.1 注册登录系统
**功能描述**：

1. **注册方式**
   - 邮箱注册
   - 手机号注册
   - 第三方登录（微信、Google、GitHub等）

2. **登录方式**
   - 账号密码登录
   - 验证码登录
   - 第三方快捷登录
   - 记住登录状态（7天/30天）

3. **安全机制**
   - 密码加密存储（bcrypt）
   - 登录失败限制（5次锁定）
   - 异地登录提醒
   - 两步验证（可选）

#### 2.3.2 个人中心
**功能描述**：
- 个人资料管理（头像、昵称、联系方式）
- 偏好设置（旅行偏好、语言、时区）
- 历史行程列表
- 收藏的景点/餐厅
- 账户安全设置

#### 2.3.3 云端行程同步
**功能描述**：
- 实时云端保存
- 多设备数据同步
- 离线编辑，联网自动同步
- 版本历史记录
- 数据备份与恢复

**数据同步内容**：
- 所有旅行计划
- 费用记录
- 个人偏好设置
- 收藏和标记
- AI对话历史

#### 2.3.4 行程分享与协作
**功能描述**：
- 生成行程分享链接
- 导出为PDF/图片
- 多人协作编辑（实时同步）
- 评论和建议功能
- 权限管理（查看/编辑）

---

### 2.4 实时旅行辅助模块（扩展功能）

#### 2.4.1 导航服务
**功能描述**：
- 调用高德/百度地图API
- 实时路线导航
- 公共交通查询
- 周边服务推荐（餐厅、厕所、ATM等）

#### 2.4.2 智能问答
**功能描述**：
- 旅行中遇到问题可随时咨询AI
- "附近有什么好吃的？"
- "这个景点需要提前预约吗？"
- "如何从这里去下一个景点？"

#### 2.4.3 天气提醒
**功能描述**：
- 目的地天气预报
- 恶劣天气预警
- 穿衣建议
- 行程调整建议

---

## 三、技术架构设计

### 3.1 前端技术栈

#### 3.1.1 核心框架
**推荐方案**：
- **框架**：React 18+ / Vue 3+
- **构建工具**：Vite / Next.js（支持SSR）
- **UI组件库**：
  - Ant Design / Element Plus（基础组件）
  - Tailwind CSS（样式）
- **状态管理**：
  - Redux Toolkit / Pinia
  - React Query / VueUse（数据缓存）

#### 3.1.2 地图集成
**推荐方案**：
- 高德地图 JS API 2.0
- 或百度地图 JavaScript API 3.0

**功能实现**：
```javascript
// 示例：地图初始化
import AMapLoader from '@amap/amap-jsapi-loader'

const initMap = async () => {
  const AMap = await AMapLoader.load({
    key: process.env.AMAP_KEY, // 从环境变量读取
    version: '2.0',
    plugins: ['AMap.Marker', 'AMap.Driving']
  })
  
  const map = new AMap.Map('map-container', {
    zoom: 11,
    center: [116.397428, 39.90923]
  })
  
  return { AMap, map }
}
```

#### 3.1.3 语音识别集成
**推荐方案一：科大讯飞**
- 使用讯飞开放平台 Web API
- 实时语音转写（实时流式识别）

**推荐方案二：浏览器原生 Web Speech API**
- Chrome 内置支持
- 免费但功能有限

**推荐方案三：阿里云智能语音**
- 录音文件识别
- 实时语音识别

**实现示例**：
```javascript
// 使用 Web Speech API
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition
const recognition = new SpeechRecognition()

recognition.lang = 'zh-CN'
recognition.continuous = true
recognition.interimResults = true

recognition.onresult = (event) => {
  const transcript = event.results[event.results.length - 1][0].transcript
  console.log('识别结果：', transcript)
}

recognition.start()
```

### 3.2 后端技术栈

#### 3.2.1 核心框架
**推荐方案**：
- **Node.js + Express** / **Koa**
- 或 **Python + FastAPI** / **Flask**
- 或 **Go + Gin**（高性能）

**目录结构示例**（Node.js）：
```
backend/
├── src/
│   ├── controllers/      # 控制器
│   ├── services/         # 业务逻辑
│   ├── models/           # 数据模型
│   ├── routes/           # 路由
│   ├── middleware/       # 中间件
│   ├── utils/            # 工具函数
│   └── config/           # 配置文件
├── tests/
├── Dockerfile
└── package.json
```

#### 3.2.2 数据库选择
**推荐方案一：Supabase**（推荐）
- 基于 PostgreSQL
- 自带用户认证
- 实时数据同步
- 文件存储
- 免费额度充足

**数据表设计**：
```sql
-- 用户表
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email VARCHAR(255) UNIQUE NOT NULL,
  username VARCHAR(100),
  avatar_url TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 旅行计划表
CREATE TABLE trips (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id),
  title VARCHAR(255),
  destination VARCHAR(255),
  start_date DATE,
  end_date DATE,
  budget DECIMAL(10, 2),
  travelers INTEGER,
  preferences JSONB,
  itinerary JSONB,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- 费用记录表
CREATE TABLE expenses (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  trip_id UUID REFERENCES trips(id),
  category VARCHAR(50),
  amount DECIMAL(10, 2),
  description TEXT,
  date TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**推荐方案二：Firebase**
- Firestore（NoSQL）
- Firebase Authentication
- Cloud Storage
- 实时同步

#### 3.2.3 身份认证
**推荐方案**：
- **JWT** (JSON Web Token) 认证
- **Refresh Token** 机制
- 使用 Supabase Auth / Firebase Auth

**实现流程**：
```
1. 用户登录 → 服务器验证
2. 签发 Access Token (15分钟) + Refresh Token (7天)
3. 客户端存储到 localStorage/Cookie
4. 请求时携带 Token
5. Token过期自动刷新
```

### 3.3 AI集成

#### 3.3.1 大语言模型选择
**推荐方案**：
- **OpenAI GPT-4/GPT-3.5**（国际）
- **阿里云通义千问**（国内，推荐）
- **百度文心一言**
- **智谱GLM-4**
- **DeepSeek**（性价比高）

#### 3.3.2 Prompt工程
**行程规划提示词模板**：
```
你是一位专业的旅行规划师。请根据以下用户需求生成详细的旅行计划：

【用户需求】
- 目的地：{destination}
- 出行天数：{days}天
- 出发日期：{start_date}
- 预算：{budget}元
- 同行人数：{travelers}人（{traveler_types}）
- 旅行偏好：{preferences}

【输出要求】
请以JSON格式输出，包含以下内容：
1. overview: 行程概述（总体介绍、亮点、建议）
2. daily_plans: 每日详细计划数组，每天包含：
   - date: 日期
   - theme: 当日主题
   - activities: 活动数组，每项包含：
     * time: 时间
     * type: 类型（景点/餐厅/交通/住宿）
     * name: 名称
     * description: 描述
     * duration: 停留时长
     * cost: 预计费用
     * location: {lat, lng, address}
     * tips: 小贴士
3. budget_breakdown: 预算明细
   - transportation: 交通费用明细
   - accommodation: 住宿费用明细
   - food: 餐饮费用明细
   - tickets: 门票费用明细
   - shopping: 购物预算
   - emergency: 应急备用金
   - total: 总计

请确保：
- 行程时间安排合理，考虑交通时间
- 景点开放时间与行程匹配
- 预算控制在用户范围内
- 符合用户偏好和同行人特点
```

**API调用示例**（阿里云通义千问）：
```javascript
const generateItinerary = async (userInput) => {
  const response = await fetch('https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${process.env.DASHSCOPE_API_KEY}`
    },
    body: JSON.stringify({
      model: 'qwen-max',
      input: {
        messages: [
          { role: 'system', content: '你是一位专业的旅行规划师...' },
          { role: 'user', content: userInput }
        ]
      },
      parameters: {
        result_format: 'message',
        temperature: 0.7
      }
    })
  })
  
  const data = await response.json()
  return JSON.parse(data.output.choices[0].message.content)
}
```

### 3.4 部署方案

#### 3.4.1 Docker容器化
**Dockerfile示例**（前后端分离）：

**后端 Dockerfile**：
```dockerfile
FROM node:18-alpine

WORKDIR /app

# 安装依赖
COPY package*.json ./
RUN npm ci --only=production

# 复制代码
COPY . .

# 暴露端口
EXPOSE 3000

# 启动
CMD ["node", "src/index.js"]
```

**前端 Dockerfile**：
```dockerfile
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

**docker-compose.yml**：
```yaml
version: '3.8'

services:
  frontend:
    build: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend
    environment:
      - REACT_APP_API_URL=http://backend:3000

  backend:
    build: ./backend
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - JWT_SECRET=${JWT_SECRET}
      - LLM_API_KEY=${LLM_API_KEY}
      - AMAP_KEY=${AMAP_KEY}
    env_file:
      - .env
```

#### 3.4.2 GitHub Actions CI/CD
**工作流示例**（.github/workflows/deploy.yml）：
```yaml
name: Build and Deploy

on:
  push:
    branches: [ main ]

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Login to Aliyun Container Registry
      uses: docker/login-action@v2
      with:
        registry: registry.cn-hangzhou.aliyuncs.com
        username: ${{ secrets.ALIYUN_USERNAME }}
        password: ${{ secrets.ALIYUN_PASSWORD }}
    
    - name: Build and Push Docker Image
      run: |
        docker build -t registry.cn-hangzhou.aliyuncs.com/your-namespace/ai-travel-planner:latest .
        docker push registry.cn-hangzhou.aliyuncs.com/your-namespace/ai-travel-planner:latest
```

---

## 四、用户界面设计

### 4.1 页面结构

#### 4.1.1 首页/登录页
- 产品介绍动画
- 登录/注册入口
- 特色功能展示
- 示例行程展示

#### 4.1.2 主控制台（Dashboard）
- 左侧导航栏
  - 创建新行程
  - 我的行程列表
  - 费用管理
  - 个人中心
- 主内容区
  - 行程卡片列表
  - 快速创建入口
  - 最近访问

#### 4.1.3 行程创建页
**布局**：
- 顶部：步骤指示器（输入需求 → AI生成 → 编辑优化 → 保存）
- 左侧：需求输入区
  - 语音输入按钮（麦克风动画）
  - 文本输入框
  - 快速填写表单
- 右侧：实时预览区
  - AI生成进度
  - 初步建议

#### 4.1.4 行程详情页（核心页面）
**布局设计**：

```
┌─────────────────────────────────────────────────────────┐
│  [Logo]  日本5日美食动漫之旅      [分享] [导出] [编辑]  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌───────────────┐  ┌────────────────────────────────┐ │
│  │               │  │                                │ │
│  │   日程列表     │  │        地图视图                 │ │
│  │               │  │                                │ │
│  │ Day 1         │  │    [景点标记]                   │ │
│  │ ├ 上海→东京    │  │    [路线]                      │ │
│  │ ├ 入住酒店     │  │    [图例]                      │ │
│  │ └ 筑地市场     │  │                                │ │
│  │               │  │                                │ │
│  │ Day 2 ▼       │  └────────────────────────────────┘ │
│  │ ├ 浅草寺       │                                    │
│  │ ├ 秋叶原       │  ┌────────────────────────────────┐ │
│  │ └ 动漫主题餐厅  │  │      预算仪表盘                 │ │
│  │               │  │  ○ 已花费: ¥3,500              │ │
│  │ ...           │  │  ○ 剩余: ¥6,500                │ │
│  │               │  │  [饼图]                        │ │
│  └───────────────┘  └────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**交互特性**：
- 点击日程项 → 地图自动聚焦对应位置
- 拖拽日程项调整顺序
- 悬停显示详细信息卡片
- 支持时间轴视图/列表视图切换

#### 4.1.5 费用管理页
- 顶部：总预算vs实际支出对比
- 分类统计图表
- 支出记录时间线
- 语音记账快捷入口
- 导出报表功能

### 4.2 设计规范

#### 4.2.1 色彩方案
**主色调**：
- 主色：#3B82F6（蓝色 - 代表旅行和探索）
- 辅色：#10B981（绿色 - 代表预算管理）
- 强调色：#F59E0B（橙色 - 代表重要提示）
- 中性色：灰度系列

#### 4.2.2 响应式设计
- 桌面端（1920×1080）：三栏布局
- 平板端（768×1024）：两栏布局
- 移动端（375×812）：单栏布局，底部导航

---

## 五、API设计

### 5.1 RESTful API端点

#### 5.1.1 用户认证
```
POST   /api/auth/register        # 注册
POST   /api/auth/login           # 登录
POST   /api/auth/logout          # 登出
POST   /api/auth/refresh         # 刷新Token
GET    /api/auth/profile         # 获取用户信息
PUT    /api/auth/profile         # 更新用户信息
```

#### 5.1.2 行程管理
```
GET    /api/trips                # 获取用户所有行程
POST   /api/trips                # 创建新行程
GET    /api/trips/:id            # 获取行程详情
PUT    /api/trips/:id            # 更新行程
DELETE /api/trips/:id            # 删除行程
POST   /api/trips/:id/share      # 生成分享链接
POST   /api/trips/generate       # AI生成行程
```

#### 5.1.3 费用管理
```
GET    /api/trips/:id/expenses   # 获取行程费用记录
POST   /api/trips/:id/expenses   # 添加费用记录
PUT    /api/expenses/:id         # 更新费用记录
DELETE /api/expenses/:id         # 删除费用记录
GET    /api/trips/:id/budget-analysis  # 获取预算分析
```

#### 5.1.4 语音服务
```
POST   /api/voice/recognize      # 语音识别
POST   /api/voice/synthesize     # 语音合成（可选）
```

### 5.2 API请求/响应示例

#### 5.2.1 AI生成行程
**请求**：
```json
POST /api/trips/generate
Content-Type: application/json
Authorization: Bearer <token>

{
  "destination": "日本",
  "days": 5,
  "startDate": "2025-06-01",
  "budget": 10000,
  "travelers": 2,
  "travelerTypes": ["成人", "儿童"],
  "preferences": ["美食", "动漫", "亲子友好"]
}
```

**响应**：
```json
{
  "success": true,
  "data": {
    "tripId": "uuid-xxx",
    "title": "日本5日美食动漫亲子之旅",
    "overview": {
      "summary": "这是一次完美结合美食探索和动漫文化的亲子之旅...",
      "highlights": ["筑地市场海鲜", "秋叶原动漫街", "迪士尼乐园"],
      "tips": ["提前预约餐厅", "购买交通卡"]
    },
    "dailyPlans": [
      {
        "day": 1,
        "date": "2025-06-01",
        "theme": "初抵东京",
        "activities": [
          {
            "time": "09:00",
            "type": "transportation",
            "name": "上海浦东 → 东京成田",
            "description": "CA921航班",
            "duration": 180,
            "cost": 1500,
            "tips": "提前2小时到机场"
          },
          {
            "time": "13:00",
            "type": "accommodation",
            "name": "东京湾希尔顿酒店",
            "description": "近地铁，亲子友好",
            "cost": 800,
            "location": {
              "lat": 35.6284,
              "lng": 139.7772,
              "address": "东京都港区台场1-9-1"
            },
            "rating": 4.5
          },
          // ... 更多活动
        ]
      },
      // ... 更多天数
    ],
    "budgetBreakdown": {
      "transportation": 4500,
      "accommodation": 2400,
      "food": 1800,
      "tickets": 1000,
      "shopping": 800,
      "emergency": 500,
      "total": 11000
    },
    "mapData": {
      "center": [139.7772, 35.6284],
      "markers": [ /* 所有标记点 */ ],
      "routes": [ /* 路线数据 */ ]
    }
  }
}
```

---

## 六、API Key 管理方案

### 6.1 安全原则
⚠️ **严禁将API Key硬编码到代码中，尤其是公开的GitHub仓库**

### 6.2 推荐方案

#### 方案一：前端配置页面（推荐）
**实现**：
1. 在设置页面提供API Key输入框
2. 用户自行输入各服务的Key
3. 加密后存储在浏览器LocalStorage
4. 每次请求从LocalStorage读取

**优点**：
- 无需服务器端存储敏感信息
- 用户自行管理Key
- 灵活性高

**实现示例**：
```javascript
// 设置页面
const saveApiKeys = (keys) => {
  const encrypted = CryptoJS.AES.encrypt(
    JSON.stringify(keys),
    'user-password'
  ).toString()
  localStorage.setItem('api_keys', encrypted)
}

// 使用时解密
const getApiKeys = () => {
  const encrypted = localStorage.getItem('api_keys')
  const decrypted = CryptoJS.AES.decrypt(encrypted, 'user-password')
  return JSON.parse(decrypted.toString(CryptoJS.enc.Utf8))
}
```

#### 方案二：环境变量配置文件
**实现**：
1. 创建 `.env` 文件（加入 .gitignore）
2. 在README中提供 `.env.example` 模板
3. 用户本地/服务器配置

**.env.example**：
```bash
# 大语言模型 API
LLM_PROVIDER=aliyun  # aliyun/openai/deepseek
ALIYUN_API_KEY=your_key_here
ALIYUN_API_URL=https://dashscope.aliyuncs.com

# 地图服务
AMAP_KEY=your_amap_key
AMAP_SECRET=your_amap_secret

# 语音识别
VOICE_PROVIDER=xunfei  # xunfei/aliyun/web
XUNFEI_APP_ID=your_app_id
XUNFEI_API_KEY=your_api_key

# 数据库
DATABASE_URL=postgresql://user:pass@localhost:5432/ai_travel_planner

# JWT密钥
JWT_SECRET=your_random_secret_key
```

#### 方案三：Docker环境变量
**docker-compose.yml**：
```yaml
services:
  backend:
    image: your-image
    environment:
      - LLM_API_KEY=${LLM_API_KEY}
      - AMAP_KEY=${AMAP_KEY}
    env_file:
      - .env.production
```

**运行命令**：
```bash
docker run -e LLM_API_KEY=xxx -e AMAP_KEY=xxx your-image
```

### 6.3 提交给助教的方案
**在README.md中添加章节**：
```markdown
## API Keys 配置（供助教使用）

### 方式一：通过环境变量（推荐）
1. 复制 `.env.example` 为 `.env`
2. 填入以下Key：

\`\`\`bash
# 阿里云通义千问（如果助教有Key，使用助教的；否则用下方提供的）
ALIYUN_API_KEY=sk-xxxxxxxxxxxxxxxx  # 有效期至2026-02-07

# 高德地图
AMAP_KEY=xxxxxxxxxxxxxxxxxxxxxxx

# 其他服务...
\`\`\`

### 方式二：通过设置页面
1. 启动应用后访问 http://localhost:3000
2. 登录后进入"设置" → "API配置"
3. 填入以下Key：
   - 通义千问 Key: sk-xxxxxxxxxxxxxxxx
   - 高德地图 Key: xxxxxxxxxxxxxxxxxxxxxxx
```

---

## 七、开发计划与里程碑

### 7.1 Phase 1：基础框架搭建（Week 1-2）
- [ ] 项目初始化（前后端框架、Git仓库）
- [ ] Docker环境配置
- [ ] 数据库设计与搭建
- [ ] 用户认证系统
- [ ] 基本页面框架

**交付物**：可运行的登录注册系统

### 7.2 Phase 2：核心功能开发（Week 3-5）
- [ ] 语音输入集成
- [ ] AI行程生成（LLM集成）
- [ ] 地图可视化
- [ ] 行程详情展示
- [ ] 行程编辑功能

**交付物**：完整的行程生成流程

### 7.3 Phase 3：费用管理与优化（Week 6）
- [ ] 预算分析模块
- [ ] 费用记录功能
- [ ] 语音记账
- [ ] 数据统计图表

**交付物**：完整的预算管理系统

### 7.4 Phase 4：测试与部署（Week 7-8）
- [ ] 单元测试
- [ ] 集成测试
- [ ] UI/UX优化
- [ ] 性能优化
- [ ] Docker镜像构建
- [ ] CI/CD配置
- [ ] 文档编写

**交付物**：可部署的Docker镜像 + 完整文档

---

## 八、质量保证

### 8.1 测试策略
1. **单元测试**：关键业务逻辑（Jest/Pytest）
2. **集成测试**：API端点测试（Postman/Supertest）
3. **E2E测试**：用户流程测试（Cypress/Playwright）
4. **性能测试**：负载测试（K6）

### 8.2 代码质量
- ESLint/Prettier代码规范
- Git Commit规范（Conventional Commits）
- 代码审查机制
- 文档注释完整

---

## 九、风险与挑战

### 9.1 技术风险
1. **LLM响应不稳定**
   - 缓解：实现重试机制、结果验证
   
2. **地图API限额**
   - 缓解：实现缓存、降级方案

3. **语音识别准确度**
   - 缓解：提供二次确认、文字修正

### 9.2 成本控制
- LLM API调用成本
- 地图API调用成本
- 云服务器成本

**建议**：
- 实现请求缓存
- 设置调用频率限制
- 提供免费/付费套餐

---

## 十、项目交付清单

### 10.1 代码仓库
- [ ] GitHub公开仓库
- [ ] 完整的提交历史（建议50+ commits）
- [ ] 清晰的分支管理（main/develop/feature分支）
- [ ] .gitignore配置正确

### 10.2 Docker镜像
- [ ] Docker镜像已构建
- [ ] 推送至阿里云镜像仓库
- [ ] 镜像包含所有依赖
- [ ] 镜像大小优化（< 1GB）

### 10.3 文档
- [ ] README.md
  - 项目介绍
  - 技术栈说明
  - 安装运行指南
  - Docker部署指南
  - API Key配置说明
  - 功能截图
  - 项目结构说明
  - 开发团队信息

- [ ] API文档（可选，建议使用Swagger）

- [ ] 用户手册（可选）

### 10.4 最终提交PDF
包含以下内容：
1. GitHub仓库地址
2. Docker镜像地址和拉取命令
3. README文档内容
4. API Keys（供助教测试）
5. 功能演示截图
6. 技术亮点说明

---

## 十一、技术亮点与创新

### 11.1 推荐实现的亮点功能
1. **智能语音对话**
   - 连续对话，理解上下文
   - "帮我调整第三天的行程，我想多留时间购物"
   
2. **实时协作编辑**
   - 多人同时编辑行程
   - WebSocket实时同步

3. **行程智能推荐**
   - 基于用户历史偏好
   - 机器学习个性化推荐

4. **AR实景导航**（可选）
   - 使用设备摄像头
   - AR标注景点方向

5. **社交分享**
   - 生成精美行程卡片
   - 分享到社交媒体

---

## 十二、参考资源

### 12.1 API文档
- 阿里云通义千问：https://help.aliyun.com/zh/dashscope/
- 高德地图API：https://lbs.amap.com/api/javascript-api/summary
- 科大讯飞语音：https://www.xfyun.cn/doc/
- Supabase：https://supabase.com/docs

### 12.2 技术教程
- Docker官方文档：https://docs.docker.com/
- GitHub Actions：https://docs.github.com/actions

---

## 十三、附录

### 13.1 名词解释
- **LLM**：Large Language Model（大语言模型）
- **JWT**：JSON Web Token（身份认证令牌）
- **CI/CD**：持续集成/持续部署
- **SSR**：Server-Side Rendering（服务端渲染）

### 13.2 开发团队建议配置
- 前端工程师 × 1-2
- 后端工程师 × 1
- UI/UX设计师 × 1（可选）

---

## 版本历史
- v1.0 (2025-11-07)：初版发布

---

**祝开发顺利！如有疑问，欢迎随时交流。**

